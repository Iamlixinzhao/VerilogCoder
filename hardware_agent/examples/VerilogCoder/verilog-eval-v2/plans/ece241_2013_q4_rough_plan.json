[{"id": "1", "content": "Define the module TopModule with input ports clk, reset, and s (3 bits), and output ports fr2, fr1, fr0, and dfr.", "source": "I would like you to implement a module named TopModule with the following interface. All input and output ports are one bit unless otherwise specified.\n\n - input  clk\n - input  reset\n - input  s (3 bits)\n - output fr2\n - output fr1\n - output fr0\n - output dfr", "parent_tasks": []}, {"id": "2", "content": "Determine the number of states for the finite-state machine (FSM) based on the water level and sensor inputs.", "source": "A large reservoir of water serves several users. In order to keep the level of water sufficiently high, three sensors are placed vertically at 5-inch intervals. When the water level is above the highest sensor s[2], the input flow rate should be zero. When the level is below the lowest sensor s[0], the flow rate should be at maximum (both Nominal flow valve and Supplemental flow valve opened). The flow rate when the level is between the upper and lower sensors is determined by two factors: the water level and the level previous to the last sensor change.", "parent_tasks": ["1"]}, {"id": "3", "content": "Implement the output logic for fr0, fr1, and fr2 based on the current state of the FSM.", "source": "Water Level           | Sensors Asserted | Nominal Flow Rate Inputs to be Asserted\nAbove s[2]            | s[0], s[1], s[2] | None\nBetween s[2] and s[1] | s[0], s[1]       | fr0\nBetween s[1] and s[0] | s[0]             | fr0, fr1\nBelow s[0]            | None             | fr0, fr1, fr2", "parent_tasks": ["2"]}, {"id": "4", "content": "Implement the logic for the dfr output to control the Supplemental flow valve based on the previous and current water levels.", "source": "The flow rate when the level is between the upper and lower sensors is determined by two factors: the water level and the level previous to the last sensor change. If the sensor change indicates that the previous level was lower than the current level, the flow rate should be increased by opening the Supplemental flow valve (controlled by dfr).", "parent_tasks": ["3"]}, {"id": "5", "content": "Implement the active-high synchronous reset logic to reset the FSM to a state equivalent to if the water level had been low for a long time (no sensors asserted, and all four outputs asserted).", "source": "Also include an active-high synchronous reset that resets the state machine to a state equivalent to if the water level had been low for a long time (no sensors asserted, and all four outputs asserted).", "parent_tasks": ["4"]}]